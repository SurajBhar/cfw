# StateFarm Dataset Split Configuration
# Creates balanced and imbalanced variants with binary and multiclass options
# @package _global_

defaults:
  - /storage@storage: local
  - _self_

# Input paths
input:
  # Downloaded/extracted StateFarm data
  statefarm_raw: ${storage.paths.raw}/statefarm
  # Merged pool directory (train + test combined)
  pool_dir: ${storage.paths.raw}/statefarm_pool

# Output paths
output:
  base_dir: ${storage.paths.processed}
  balanced_multiclass: ${output.base_dir}/statefarm_balanced_multiclass
  balanced_binary: ${output.base_dir}/statefarm_balanced_binary
  imbalanced_multiclass: ${output.base_dir}/statefarm_imbalanced_multiclass
  imbalanced_binary: ${output.base_dir}/statefarm_imbalanced_binary

# Split ratios
split_ratios:
  train: 0.70
  val: 0.15
  test: 0.15

# Imbalance configuration (for imbalanced variants)
imbalance:
  strategy: exponential_decay
  base_retention: 0.70  # c0 retains 70%
  decay_factor: 0.5     # each subsequent class retains 50% of previous

# Processing settings
processing:
  seed: 42
  max_workers: 8
  rename_sequential: true  # Rename images to img_XXXXXX.ext

# Variants to build
variants:
  balanced_multiclass:
    enabled: true
  balanced_binary:
    enabled: true
  imbalanced_multiclass:
    enabled: true
  imbalanced_binary:
    enabled: true

# Binary class mapping
binary_mapping:
  non_distracted:
    - c0  # Safe driving
  distracted:
    - c1  # Texting - right hand
    - c2  # Talking on phone - right hand
    - c3  # Texting - left hand
    - c4  # Talking on phone - left hand
    - c5  # Operating radio
    - c6  # Drinking
    - c7  # Reaching behind
    - c8  # Hair and makeup
    - c9  # Talking to passenger

# Validation
validation:
  check_overlap: false  # Opt-in: hash-based and can be expensive on large datasets
  verify_counts: true
