$schema: https://azuremlschemas.azureedge.net/latest/sweepJob.schema.json
trial:
  code: ../../
  command: >-
    python scripts/train.py
    experiment=azure/baseline_dinov2_binary
    dataset.train_dir=${{inputs.dataset}}/train
    dataset.val_dir=${{inputs.dataset}}/val
    dataset.test_dir=${{inputs.dataset}}/test
    optimizer.lr=${{search_space.lr}}
    optimizer.weight_decay=${{search_space.weight_decay}}
    trainer.num_epochs=20
  environment: azureml:cfw-dinov2-cu118:2
  compute: azureml:cfwcluster
  resources:
    instance_count: 1

inputs:
  dataset:
    type: uri_folder
    path: azureml:cfw_daa_binary_kinect_color_split0:20260211.1
    mode: ro_mount

sampling_algorithm: random
search_space:
  lr:
    type: choice
    values: [0.0003, 0.001, 0.003]
  weight_decay:
    type: choice
    values: [0.0, 0.0001, 0.001]

objective:
  primary_metric: val_balanced_accuracy
  goal: maximize

limits:
  max_total_trials: 16
  max_concurrent_trials: 2
  timeout: 14400
